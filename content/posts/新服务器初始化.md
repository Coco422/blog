---
title: æ–°æœåŠ¡å™¨åˆå§‹åŒ– 2
description:
date: 2025-12-15T15:49:50+08:00
license: Licensed under CC BY-NC-SA 4.0
hidden: false
comments: true
draft: false
lastmod: 2025-12-15T16:37:21+08:00
showLastMod: true
tags:
  - æ•™ç¨‹
  - æœåŠ¡å™¨
  - linux
categories:
  - æ‚æŠ€æµ…å°
---
> [!NOTE]
> åˆå‰æ‰‹æäº†å°å°é¸¡ï¼Œé‡æ¸©ä¸€ä¸‹æœåŠ¡å™¨åˆå§‹åŒ–
> å‚è€ƒæ–‡ç« 
> 
> [LinuxæœåŠ¡å™¨çš„åˆæ­¥é…ç½®æµç¨‹ - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—](https://www.ruanyifeng.com/blog/2014/03/server_setup.html)
> 
> ä¹‹å‰æˆ‘å†™çš„ åšå®¢[æœåŠ¡å™¨åˆå§‹åŒ– \| å®‰è½æ»¢ Blog](https://blog.anluoying.com/posts/%E9%98%BF%E9%87%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%88%9D%E5%A7%8B%E5%8C%96/)ä½†æ˜¯å†™çš„æ¯”è¾ƒç®€å•ï¼Œè¿™æ¬¡ç¨å¾®æ•´ç†ä¸€ä¸‹æ ¼å¼å’Œä¸€äº›ç»†èŠ‚,å¹¶ä¸”åŠ ä¸Šä¸€äº›å®‰å…¨é…ç½®
> 
> é‚£ä¹ˆæ–‡ç« æ˜¯è€æ–‡ç« äº†ï¼Œæ‰€ä»¥æ–°çš„æµç¨‹ä¼šæœ‰ä¸€ä¸¢ä¸¢å˜åŒ–ï¼Œå¯ä»¥å·ä¸€äº›æ‡’

## **ğŸ“Œ å‰æ**

æœ¬æ–‡å‡è®¾ä½ å·²ç»ï¼š

- å®‰è£…å¥½æœ€æ–°çš„ **Ubuntu Server LTS**ï¼ˆä¾‹å¦‚ **Ubuntu 24.04 LTS** æˆ– **22.04 LTS**ï¼‰ç³»ç»Ÿï¼›å‚è€ƒå®˜æ–¹å®‰è£…æµç¨‹å¯ä»¥å…ˆå®ŒæˆåŸºæœ¬å®‰è£…å’Œç½‘ç»œé…ç½®ã€‚
- æœ‰ root æˆ– sudo æƒé™æ¥æ‰§è¡Œç³»ç»Ÿåˆå§‹åŒ–æ“ä½œã€‚

| **æ­¥éª¤**  | **å†…å®¹**              |
| ------- | ------------------- |
| ç™»å½• & ç”¨æˆ· | åˆ›å»ºæ™®é€šç”¨æˆ·ã€ç¦ç”¨ root SSH  |
| ç³»ç»Ÿæ›´æ–°    | æ›´æ–°å‡çº§åŠè‡ªåŠ¨å®‰å…¨å‡çº§         |
| å®‰å…¨é…ç½®    | SSH å¼ºåŒ–ã€UFWã€Fail2Ban |
| ç³»ç»Ÿå¢å¼º    | Chronyã€Auditã€å®‰å…¨æ‰«æ   |
| å…¶ä»–      | æ—¶åŒºã€Swapã€å¸¸ç”¨å·¥å…·        |
## **ğŸš€ ä¸€ã€é¦–æ¬¡ç™»å½• & ç”¨æˆ·è´¦å·è®¾å®š**

### **1. ç™»å½•æœåŠ¡å™¨**

```
ssh root@your_server_ip
```

å¦‚æœæ˜¯äº‘ä¸»æœºä¸€èˆ¬é»˜è®¤åˆ›å»ºäº†ä¸€ä¸ª sudo ç”¨æˆ·ï¼Œå¯ä»¥ç›´æ¥ç”¨è¯¥ç”¨æˆ·ç™»å½•ï¼Œè€Œä¸è¦ç›´æ¥ç”¨ root ç™»å½•ã€‚

> æˆ‘ä¸€èˆ¬å–œæ¬¢æ”¹ä¸ª hostname å’Œæ—¶åŒº

```
hostnamectl set-hostname <new-hostname>
sudo timedatectl set-timezone Asia/Hong_Kong
```

### **2. åˆ›å»ºæ–°ç”¨æˆ·ï¼ˆé¿å…æ—¥å¸¸ä½¿ç”¨ rootï¼‰**

```
sudo adduser youruser
sudo usermod -aG sudo youruser
```

ğŸ‘‰ å°† youruser æ¢æˆä½ è‡ªå·±çš„ç®¡ç†ç”¨æˆ·åã€‚

> è¿™é¿å…äº†ä¸€ç›´ç”¨ root æ“ä½œï¼Œæœ‰åŠ©äºæé«˜å®‰å…¨æ€§ã€‚

### **3. ç¦æ­¢ root SSH ç™»å½•ï¼ˆå¼ºçƒˆå»ºè®®ï¼‰**  

âœ”ï¸ æ¨èä½¿ç”¨ **SSH key ç™»å½•**ï¼ˆä¸å…è®¸å¯†ç ï¼Œé˜²æ­¢æš´åŠ›ç ´è§£ï¼‰ã€‚è°¢è°¢ssh-copy-id
ä¸‹é¢æœ‰å†™

## **ğŸ§° äºŒã€ç³»ç»Ÿæ›´æ–°ä¸åŸºç¡€è½¯ä»¶**

### **1. æ›´æ–°ç³»ç»Ÿ**

```
sudo apt update
sudo apt upgrade -y
sudo apt autoremove -y
sudo apt clean
```

ç¡®ä¿ç³»ç»Ÿå†…æ ¸å’Œè½¯ä»¶åŒ…æ˜¯æœ€æ–°çš„ã€‚

### **2. å®‰è£…æ—¥å¸¸å·¥å…·**

```
sudo apt install -y htop curl wget lsof git vim net-tools unzip build-essential
```

å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚æ·»åŠ å…¶ä»–å·¥å…·ï¼Œå¦‚ nano ç­‰ã€‚

### **3. å®‰è£…è‡ªåŠ¨å®‰å…¨æ›´æ–°ï¼ˆUnattended Upgradesï¼‰**

```
sudo apt install unattended-upgrades
sudo dpkg-reconfigure unattended-upgrades
```

gpt å»ºè®®æˆ‘è¿™æ ·åšã€‚æˆ‘è¯•è¯•

## **ğŸ” ä¸‰ã€SSH & é˜²ç«å¢™é…ç½®å¼ºåŒ–**

### **1. é…ç½® UFWï¼ˆUncomplicated Firewallï¼‰**

```
sudo ufw allow OpenSSH
sudo ufw enable
```

æ£€æŸ¥çŠ¶æ€ï¼š

```
sudo ufw status
```

åªå¼€æ”¾éœ€è¦çš„ç«¯å£ã€‚

### **2. å®‰è£… Fail2Banï¼ˆé˜»æ­¢æš´åŠ›æ”»å‡»ï¼‰**

```
sudo apt install fail2ban
```

Fail2Ban ç›‘æ§å¤±è´¥ç™»å½•å°è¯•å¹¶è‡ªåŠ¨å±è”½æ¶æ„ IPã€‚

## **ğŸ” å››ã€å®‰å…¨åŠ å›ºå»ºè®®ï¼ˆç”Ÿäº§çº§ï¼‰**


è¿™äº›æ˜¯å½“ä¸‹è¾ƒå¸¸è§çš„è¿›ä¸€æ­¥åŠ å›ºæªæ–½ï¼š

### **1. ç¦æ­¢ SSH å¯†ç ç™»å½• & å¼ºåˆ¶ä½¿ç”¨ Key**  

SSH é…ç½®ä¸­å¦‚å‰æ‰€ç¤ºè®¾ç½®ï¼š

```
PasswordAuthentication no
```

å¼ºåˆ¶ä»…ä½¿ç”¨ Key ç™»å½•ã€‚

### **2. å®‰å…¨å¢å¼ºå·¥å…·**

å®‰è£…å¹¶å¯ç”¨ AppArmorï¼š

```
sudo apt install apparmor apparmor-utils
sudo aa-enforce /etc/apparmor.d/*
```


### **3. ç³»ç»Ÿå®¡è®¡ & æ¼æ´æ‰«æ**


å®‰è£… Lynis åšå®‰å…¨æ‰«æï¼š

```
sudo apt install lynis
sudo lynis audit system
```

å¸®åŠ©å‘ç°æ½œåœ¨å®‰å…¨éšæ‚£ã€‚

### **4. å¼ºå¯†ç  & å¯†ç ç­–ç•¥**
  

å¯ä»¥ä½¿ç”¨ PAM å¯†ç ç­–ç•¥å¢å¼ºå¯†ç å¼ºåº¦ï¼š

```
sudo apt install libpam-cracklib
```

ä¿®æ”¹ /etc/pam.d/common-password è®¾ç½®å¼ºå£ä»¤è§„åˆ™ã€‚


## **ğŸ“Š äº”ã€ç›‘æ§ä¸æ—¶é’ŸåŒæ­¥**

  
### **1. å®‰è£… Chronyï¼ˆæ—¶é—´åŒæ­¥ï¼‰**

```
sudo apt install chrony
```

è¿™æ˜¯æ¯”ä¼ ç»Ÿ ntp æ›´ç¨³å¥çš„æ—¶é—´æœåŠ¡ã€‚


### **2. åŸºæœ¬ç›‘æ§å·¥å…·**

ç”¨çš„ netdata

æä¾› UI ç›‘æ§æœºå™¨çš„ CPU/å†…å­˜/ç½‘ç»œç­‰ã€‚


## **ğŸ“¦ å…­ã€å…¶ä»–åŸºç¡€è®¾ç½®**

### **1. è®¾ç½®æ—¶åŒº**

```
sudo timedatectl set-timezone Asia/Shanghai
```

å¯æ ¹æ®åœ°åŸŸè°ƒæ•´ã€‚


### **2. é…ç½® Swapï¼ˆå¦‚æœæ˜¯æ—  Swap ç³»ç»Ÿï¼‰**

```
sudo fallocate -l 4G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile
```

å¹¶å†™å…¥ /etc/fstab ä¿æŒé‡å¯åç”Ÿæ•ˆã€‚
